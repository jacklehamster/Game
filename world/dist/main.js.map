{"version":3,"sources":["../main.js"],"names":["require","THREE","DOK","debug","fps","location","search","indexOf","document","getElementById","style","display","renderer","WebGLRenderer","scene","Scene","setClearColor","render","Camera","getCamera","window","addEventListener","setSize","innerWidth","innerHeight","sortObjects","setPixelRatio","devicePixelRatio","body","appendChild","domElement","images","squid","toUrl","floor","sprite","border","SpriteSheet","preLoad","getBorderedImage","index","spritesheet","cut","getCut","url","spriteRenderer","SpriteRenderer","add","mesh","range","cellSize","roundabout","Utils","Roundabout","closestPoint","x","y","getClosestSpritePosition","limit","Math","round","reset","i","pos","next","sprites","spriteCollection","get","empty","obj","picked","uid","pickedItem","selectedObj","getSelected","xPos","mousePos","yPos","getCamPos","camera","position","collection","Collection","type","width","height","count","c","frame","Loop","time","sel","selected","spritePos","light","img","length","SpriteObject","create","init","quaternions","southQuaternionArray","spriteSelection","spriteCubes","spriteCube","spriteInfo","size","options","pickedMe","random","push","westQuaternionArray","eastQuaternionArray","forEach","setTypeCube","spriteObj","spriteFace","createSpriteCollection","spriteFunction","call","initialize","Loader","getLoadingBar","setOnLoad","gameLoaded","removeChild","startGame","camGoal","Mouse","setOnTouch","dx","dy","down","pageX","pageY","mouseMoveTo","Vector3","request","XMLHttpRequest","open","config","JSON","parse","responseText","setCameraPosition","send","createSprite","cancel","e","event","preventDefault","drop","dt","dataTransfer","reader","FileReader","file","files","console","log","Image","maxWidth","maxHeight","src","result","readAsDataURL","vector","set","unproject","dir","sub","normalize","distance","z","clone","multiplyScalar","find","move","setIndexProcessor","image","zIndex","spriteObject","addLoop","updateGraphics","textContent"],"mappings":"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","file":"main.js","sourcesContent":["require([\n    'threejs',\n    'dobuki',\n], function(THREE, DOK) {\n\n    var debug = {\n        fps: location.search.indexOf(\"fps\")>=0,\n    };\n\n    document.getElementById(\"fps\").style.display = debug.fps ? \"\" : \"none\";\n\n    var renderer = new THREE.WebGLRenderer();//{ antialias: true });\n    var scene = new THREE.Scene();\n    renderer.setClearColor (0, 1);\n\n\n    renderer.render(scene,DOK.Camera.getCamera());\n    window.addEventListener(\"resize\",function() {\n        renderer.setSize( innerWidth, innerHeight );\n    });\n    renderer.sortObjects = false;\n\n    renderer.setSize( innerWidth, innerHeight );\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setClearColor (0xffffff, 1);\n    document.body.appendChild( renderer.domElement );\n\n    //    DOK.addControlBall();\n    //  DOK.addControlBox();\n\n    var images = {\n        squid: [\n            require.toUrl(\"dok/images/squid.png|0,0,32,32\"),\n            require.toUrl(\"dok/images/squid.png|32,0,32,32\"),\n            require.toUrl(\"dok/images/squid.png|0,32,32,32\"),\n            require.toUrl(\"dok/images/squid.png|32,32,32,32\"),\n        ],\n        floor: require.toUrl(\"dok/images/wood.png\"),\n        sprite: [\n        ],\n        border: [\n        ],\n    };\n    DOK.SpriteSheet.preLoad(images);\n\n    function getBorderedImage(index) {\n        if(index in DOK.SpriteSheet.spritesheet.border) {\n            return DOK.SpriteSheet.spritesheet.border[index];\n        }\n        var cut = DOK.SpriteSheet.getCut(index);\n        images.border[index] = cut.url + \"|border:10%\";\n        DOK.SpriteSheet.preLoad(images);\n        return DOK.SpriteSheet.spritesheet.border[index];\n    }\n\n\n    var spriteRenderer = new DOK.SpriteRenderer();\n    scene.add(spriteRenderer.mesh);\n\n    //    var mouse = {x:0,y:0};\n    /*    document.addEventListener(\"mousemove\", function(e) {\n     mouse.x = e.pageX - innerWidth/2;\n     mouse.y = e.pageY - innerHeight/2;\n     e.preventDefault();\n     });\n     */\n\n    var range = 100;\n    var cellSize = 64;\n    renderer.setClearColor (0xffffff, 1);\n\n\n\n\n    var roundabout = new DOK.Utils.Roundabout();\n    var closestPoint = { x:0,y:0};\n    function getClosestSpritePosition(x,y,limit) {\n        x = Math.round(x);\n        y = Math.round(y);\n        if(!limit) limit = 10;\n        roundabout.reset();\n        //        console.log(x,y);\n\n        for(var i=0; i<limit; i++) {\n            var pos = roundabout.next();\n            var sprites = spriteCollection.get(x+pos[0],y+pos[1]);\n            if(sprites && !empty(sprites)) {\n                closestPoint.x = x+pos[0];\n                closestPoint.y = y+pos[1];\n                return closestPoint;\n            }\n        }\n        return null;\n    }\n\n    function empty(obj) {\n        for(var i in obj) {\n            return false;\n        }\n        return true;\n    }\n\n    function picked(obj) {\n        return obj.uid === pickedItem;\n    }\n\n\n    var selectedObj = { x: 0, y: 0};\n    function getSelected() {\n        //        var xPos = camera.position.x + mouse.x * 2;\n        //        var yPos = camera.position.y - 2 * mouse.y;\n\n        var xPos = mousePos.x;\n        var yPos = mousePos.y;\n\n        selectedObj.x = Math.round(xPos/cellSize);\n        selectedObj.y = Math.round(yPos/cellSize);// + 6;\n        return selectedObj;\n    }\n\n    function getCamPos() {\n        var xPos = camera.position.x;\n        var yPos = camera.position.y;\n\n        selectedObj.x = Math.round(xPos/cellSize);\n        selectedObj.y = Math.round(yPos/cellSize) + 6;\n        return selectedObj;\n    }\n\n    var collection = new DOK.Collection(\n        {\n            type: \"grid\",\n            get x() {\n                return getCamPos().x -Math.floor(range/2);\n            },\n            get y() {\n                return getCamPos().y -Math.floor(range/2);\n            },\n            width: range,\n            height: range,\n            count: 1,\n        },\n        function(x,y,c) {\n            var frame = Math.floor(DOK.Loop.time/100);\n            var sel = getSelected();\n            var selected = !spritePos && !pickedItem && sel.x === x && sel.y === y;\n            var light = 1;\n            var img = c!==0 ? DOK.SpriteSheet.spritesheet.squid[frame%DOK.SpriteSheet.spritesheet.squid.length] : DOK.SpriteSheet.spritesheet.floor;\n            if(selected && Math.floor(DOK.Loop.time/10)%4!==0) {\n                img = getBorderedImage(img);\n            }\n\n            return DOK.SpriteObject.create().init(\n                x*cellSize,y*cellSize,0,//c!==0?0:-64,\n                cellSize,cellSize,\n                c!==0?null:DOK.Camera.quaternions.southQuaternionArray,\n                light,//c!==0?1:1.5,\n                img\n            );\n        }\n    );\n\n    function spriteSelection() {\n        var sel = spritePos;\n        return sel ? spriteCollection.get(sel.x,sel.y) : null;\n    }\n\n    var spriteCubes = [];\n    function spriteCube(spriteInfo) {\n        var x = spriteInfo.x;\n        var y = spriteInfo.y;\n        var index = spriteInfo.index;\n        var size = this.options.cellSize*3;\n        var pickedMe = picked(spriteInfo);\n        var light = pickedMe ? Math.random() : 1;\n        //spritePos && Math.floor(x)===spritePos.x&& Math.floor(y)===spritePos.y ? Math.random() : 1;\n        var selected = spritePos && Math.floor(x)===spritePos.x&& Math.floor(y)===spritePos.y;\n        var img = DOK.SpriteSheet.spritesheet.sprite[index];\n        if(!pickedMe && selected && Math.floor(DOK.Loop.time/10)%4!==0) {\n            img = getBorderedImage(img);\n        }\n\n        spriteCubes.push(DOK.SpriteObject.create().init(\n            x*cellSize,y*cellSize,size/2,\n            size,size,\n            DOK.Camera.quaternions.southQuaternionArray,\n            light,\n            img\n        ));\n        spriteCubes.push(DOK.SpriteObject.create().init(\n            x*cellSize-10,y*cellSize,size/2,\n            size,size,\n            DOK.Camera.quaternions.westQuaternionArray,\n            light,\n            img\n        ));\n        spriteCubes.push(DOK.SpriteObject.create().init(\n            x*cellSize+10,y*cellSize,size/2,\n            size,size,\n            DOK.Camera.quaternions.eastQuaternionArray,\n            light,\n            img\n        ));\n        spriteCubes.push(DOK.SpriteObject.create().init(\n            x*cellSize,y*cellSize,size/2,\n            size,size,\n            DOK.Camera.quaternions.eastQuaternionArray,\n            light,\n            img\n        ));\n        spriteCubes.forEach(setTypeCube)\n        return spriteCubes;\n    }\n\n    function setTypeCube(spriteObj) {\n        spriteObj.type = 'face';\n    }\n\n    function spriteFace(spriteInfo) {\n        var x = spriteInfo.x;\n        var y = spriteInfo.y;\n        var index = spriteInfo.index;\n        var size = this.options.cellSize*3;\n        var pickedMe = picked(spriteInfo);\n        var light = pickedMe ? Math.random() : 1;\n        //spritePos && Math.floor(x)===spritePos.x&& Math.floor(y)===spritePos.y ? Math.random() : 1;\n        var selected = spritePos && Math.floor(x)===spritePos.x&& Math.floor(y)===spritePos.y;\n        var img = DOK.SpriteSheet.spritesheet.sprite[index];\n        if(!pickedMe && selected && Math.floor(DOK.Loop.time/10)%4!==0) {\n            img = getBorderedImage(img);\n        }\n\n        var spriteObj = DOK.SpriteObject.create().init(\n            x*cellSize,y*cellSize,size/2,\n            size,size,\n            null,\n            light,\n            img\n        );\n        spriteObj.type = \"face\";\n        return spriteObj;\n    }\n\n\n    var spriteCollection = DOK.Collection.createSpriteCollection({\n        cellSize: cellSize,\n        spriteFunction: function(spriteInfo) {\n            switch (spriteInfo.type) {\n                case 'face':\n                    return spriteFace.call(this,spriteInfo);\n                    break;\n                case 'cube':\n                    return spriteCube.call(this,spriteInfo);\n                    break;\n            }\n        },\n    });\n\n    function initialize() {\n        DOK.Loader.getLoadingBar();\n        DOK.Loader.setOnLoad(gameLoaded);\n    }\n\n    function gameLoaded() {\n        document.body.removeChild(DOK.Loader.getLoadingBar());\n        renderer.setClearColor (0xffffff, 1);\n        renderer.render(scene,DOK.Camera.getCamera());\n        startGame();\n    }\n\n    var camera = DOK.Camera.getCamera();\n    //    var mz = 0, rot = 0;\n    var camGoal = {\n        x:camera.position.x, y:camera.position.y,\n    };\n    DOK.Mouse.setOnTouch(\n        function(dx,dy,down,pageX,pageY) {\n            if(dx!==null && dy!==null) {\n                if(pickedItem) {\n                    mouseMoveTo(pageX, pageY);\n                } else if(down) {\n                    camGoal.x = camera.position.x - dx*20;\n                    camGoal.y = camera.position.y + dy*20;\n                } else {\n                    mouseMoveTo(pageX, pageY);\n                }\n                //            mz -= dy/2;\n                //            rot += (dx/1000);\n            } else {\n                if(down) {\n                    camGoal.x = camera.position.x;\n                    camGoal.y = camera.position.y;\n                    for(var uid in spriteSelection()) {\n                        pickedItem = uid;\n                    }\n                } else {\n                    pickedItem = null;\n                }\n            }\n        }\n    );\n\n    var mousePos = new THREE.Vector3();\n    /*    document.addEventListener(\"mousemove\", function(event) {\n     mouseMoveTo(event.pageX, event.pageY);\n     event.preventDefault();\n     });\n     */\n    var pickedItem = null;\n    /*    document.addEventListener(\"mousedown\", function(event) {\n     for(var uid in spriteSelection()) {\n     pickedItem = uid;\n     }\n     });\n\n     document.addEventListener(\"mouseup\", function(event) {\n     pickedItem = null;\n     });\n     */\n\n    /*\n     var geometry = new THREE.SphereGeometry(3, 50, 50, 0, Math.PI * 2, 0, Math.PI * 2);\n     var material = new THREE.MeshNormalMaterial();\n     var egg = new THREE.Mesh(geometry, material);\n     egg.position.set(0,0,0);\n     egg.geometry.scale(8,10,8);\n     scene.add(egg);\n     */\n\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", \"config.json\", true);\n    request.addEventListener(\"load\", function() {\n        var config= JSON.parse(request.responseText);\n        DOK.Camera.setCameraPosition(config.camera);\n    });\n    request.send(null);\n\n\n    function createSprite(index) {\n        var x = getSelected().x; //getCamPos().x,\n        var y = getSelected().y; //getCamPos().y,\n        var spriteInfo = spriteCollection.create(x,y,index);\n        spriteInfo.type = 'face';\n        //        console.log(\"DROPPED\",spriteInfo);\n\n        /*        var geometry = new THREE.SphereGeometry(3, 50, 50, 0, Math.PI * 2, 0, Math.PI * 2);\n         var material = new THREE.MeshNormalMaterial();\n         var egg = new THREE.Mesh(geometry, material);\n         egg.position.set(getSelected().x*64,getSelected().y*64,0);\n         egg.geometry.scale(8,8,8);\n         scene.add(egg);*/\n        /*\n         var geometry = new THREE.PlaneGeometry(1,1);\n         var material = new THREE.MeshNormalMaterial();\n         var egg = new THREE.Mesh(geometry, material);\n         egg.position.set(getSelected().x*64,getSelected().y*64,0);\n         egg.geometry.scale(8,8,8);\n         egg.rotateX(Math.PI);\n         scene.add(egg);\n         */\n        /*\n         return DOK.create(DOK.SpriteObject).init(\n         x*cellSize,y*cellSize,size/2,\n         size,size,\n         null,\n         1,\n         DOK.spritesheet.sprite[index]\n         );\n         */\n    }\n\n    function cancel(e) {\n        e = e || event;\n        //console.log(e.dataTransfer);\n        //        mouse.x = e.pageX - innerWidth/2;\n        //        mouse.y = e.pageY - innerHeight/2;\n        mouseMoveTo(e.pageX, e.pageY);\n        e.preventDefault();\n        return false;\n    }\n\n    function drop(e) {\n        e = e || event;\n        var pos = getSelected();\n        var dt    = e.dataTransfer;\n        var reader = new FileReader();\n        var file = dt.files[0];\n        //        console.log(e);\n        reader.addEventListener( 'loadend', function(e) {\n            console.log(file.type);\n            if(['image/gif','image/jpeg','image/png'].indexOf(file.type)<0) {\n                return;\n            } else if(file.size>10000000) {\n                return;\n            }\n            var img = new Image();\n            img.style.maxWidth = \"100px\";\n            img.style.maxHeight = \"100px\";\n            img.addEventListener(\"load\", function(e) {\n                //        images['floor'] = img.src;\n                var index = images.sprite.length;\n                images.sprite.push(img.src);\n                DOK.SpriteSheet.preLoad(images);\n\n                createSprite(index);\n\n\n                /*            document.getElementById(\"sidebar\").appendChild(img);\n                 img.style.cursor = \"pointer\";\n                 img.addEventListener(\"click\", function(e) {\n                 createSprite(index);\n\n                 });*/\n                //    img.addEventListener(\"click\", function(e) {\n                //\n                //  });\n                //        DOK.preLoad(images);\n                /*        hero[5] = mx - img.naturalWidth/2;\n                 hero[6] = my - img.naturalHeight/2;\n                 hero[7] = img.naturalWidth;\n                 hero[8] = img.naturalHeight;*/\n            });\n\n            img.src = this.result;\n            reader = null;\n        });\n\n        reader.readAsDataURL(file);\n        e.preventDefault();\n        return false;\n    }\n    document.addEventListener('dragover', cancel);\n    document.addEventListener('dragenter', cancel);\n    document.addEventListener('dragleave', cancel);\n    document.addEventListener('drop', drop);\n\n\n    /*\n     var geometry = new THREE.SphereGeometry(3, 50, 50, 0, Math.PI * 2, 0, Math.PI * 2);\n     var material = new THREE.MeshNormalMaterial();\n     var egg = new THREE.Mesh(geometry, material);\n     egg.position.set(0,0,0);\n     egg.geometry.scale(8,10,8);\n     scene.add(egg);\n     */\n\n\n    //    var raycaster = new THREE.Raycaster();\n    ///  var mouse = new THREE.Vector2();\n    var spritePos = null;\n    function mouseMoveTo(x,y) {\n        /*        mouse.x = x;\n         mouse.y = y;\n\n         var camera = DOK.getCamera();\n         raycaster.setFromCamera( mouse, camera );\n         var intersects = raycaster.intersectObjects( [spriteRenderer.mesh] );\n\n         if ( intersects.length > 0 ) {\n\n         var intersect = intersects[0];\n         console.log(intersect);\n         egg.position.x = intersect.point.x;\n         egg.position.y = intersect.point.y;\n         egg.position.z = intersect.point.z;\n         }*/\n\n        /*\n         // Parse all the faces\n         for ( var i in intersects ) {\n\n         intersects[ i ].face.material[ 0 ].color.setHex( Math.random() * 0xffffff | 0x80000000 );\n\n         }\n         */\n\n        var vector = new THREE.Vector3();\n        vector.set(\n            ( x / window.innerWidth ) * 2 - 1,\n            - ( y / window.innerHeight ) * 2 + 1,\n            0.5 );\n\n        vector.unproject( camera );\n\n        var dir = vector.sub( camera.position ).normalize();\n\n        var distance = - camera.position.z / dir.z;\n\n        var pos = camera.position.clone().add( dir.multiplyScalar( distance ) );\n        mousePos.x = pos.x;\n        mousePos.y = pos.y;\n        mousePos.z = pos.z;\n\n\n        if(pickedItem) {\n            spritePos = null;\n            var sprite = spriteCollection.find(pickedItem);\n            sprite.move(pos.x/cellSize, pos.y/cellSize);\n            //            console.log(pickedItem);\n        } else {\n            var sel = getSelected();\n            spritePos = getClosestSpritePosition(sel.x,sel.y,20);\n        }\n        //        console.log(spritePos);\n    }\n\n\n\n    DOK.SpriteRenderer.setIndexProcessor(function (images, count) {\n        for(var i=0; i<images.length;i++) {\n            var image = images[i];\n            image.zIndex += image.spriteObject.type===\"face\"\n                ?10000\n                :image.spriteObject.type===\"cube\"\n                    ?10000\n                    :0;\n        }\n    });\n\n\n\n\n\n\n    function startGame() {\n        DOK.Loop.fps = 45;\n        var frame = 0;\n        DOK.Loop.addLoop(function() {\n            //egg.rotateX(.1);\n            frame++;\n            var camera = DOK.Camera.getCamera();\n            camera.position.x += (camGoal.x - camera.position.x) / 3;\n            camera.position.y += (camGoal.y - camera.position.y) / 3;\n            //            camera.position.x -= ddx;\n            //          camera.position.y += ddy;\n            //        ddx *= .7;\n            //      ddy *= .7;\n            /*            camera.position.z += mz;\n             camera.rotateY(rot);\n             mz *= .8;\n             rot *= .8;*/\n            collection.forEach(spriteRenderer.display);\n            spriteCollection.forEach(spriteRenderer.display);\n            spriteRenderer.updateGraphics();\n            if(debug.fps && frame%10===0)\n                document.getElementById(\"fps\").textContent = DOK.Loop.fps + \" fps\";\n            renderer.render(scene, camera);\n        });\n    }\n\n    initialize();\n\n});"]}