{"version":3,"sources":["../../../../lib/jsgif/O/out.js"],"names":["bitsToNum","b","reduce","g","e","prototype","shiftN","undefined","shift","splice","byteToBitArr","push","lzwDecode","i","k","o","charCodeAt","m","l","d","j","a","h","n","f","c","length","concat","console","assert","apply","Stream","data","len","pos","readByte","Error","readBytes","read","String","fromCharCode","readUnsigned","parseGIF","reserved","disposalMethod","userInput","transparencyGiven","delayTime","transparencyIndex","terminator","ext","gce","comment","com","unknown","iterations","app","NETSCAPE","identifier","authCode","label","extType","toString","sentinel","type","leftPos","topPos","width","height","lctFlag","interlace","sorted","lctSize","lct","lzwMinCodeSize","pixels","img","eof","progress","setTimeout","sig","ver","gctFlag","colorRes","gctSize","bgColor","pixelAspectRatio","gct","hdr","exports","binGetURL","XMLHttpRequest","overrideMimeType","onload","responseText","open","send","done","getImageData","document","createElement","getElementById","getContext","putImageData","createImageData","forEach","innerHTML","Math","floor","run","value"],"mappings":"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","file":"out.js","sourcesContent":["function bitsToNum(b){return b.reduce(function(g,e){return g*2+e},0)}Array.prototype.shiftN=function(b){return b==undefined?this.shift():this.splice(0,b)};function byteToBitArr(b){for(var g=[],e=7;e>=0;e--)g.push(!!(b&1<<e));return g}\nfunction lzwDecode(b,g){function e(i){for(var k=0,o=0;o<i;o++){if(g.charCodeAt(m>>3)&1<<m%8)k|=1<<o;m++}return k}function l(){d=[];j=b+1;for(var i=0;i<a;i++)d[i]=[i];d[a]=[];d[h]=null}for(var m=0,n=[],a=1<<b,h=a+1,j=b+1,d=[],f,c;;){c=f;f=e(j);if(f==a)l();else{if(f==h)break;if(f<d.length)c!=a&&d.push(d[c].concat(d[f][0]));else{console.assert(f==d.length);d.push(d[c].concat(d[c][0]))}n.push.apply(n,d[f]);d.length==1<<j&&j<12&&j++}}console.assert((m>>3)+!!(m%8)==g.length);return n}\nvar Stream=function(b){this.data=b;this.len=this.data.length;this.pos=0;this.readByte=function(){if(this.pos>=this.data.length)throw Error(\"Attempted to read past end of stream.\");return b.charCodeAt(this.pos++)&255};this.readBytes=function(g){for(var e=[],l=0;l<g;l++)e.push(this.readByte());return e};this.read=function(g){for(var e=\"\",l=0;l<g;l++)e+=String.fromCharCode(this.readByte());return e};this.readUnsigned=function(){var g=this.readBytes(2);return(g[1]<<8)+g[0]}};\nfunction parseGIF(b,g){function e(){return function(){}}function l(a){for(var h=[],j=0;j<a;j++)h.push(b.readBytes(3));return h}function m(a){function h(c){var i=b.readByte();f(\"blockSize: %d\",i);i=byteToBitArr(b.readByte());c.reserved=i.shiftN(3);c.disposalMethod=bitsToNum(i.shiftN(3));c.userInput=i.shift();c.transparencyGiven=i.shift();f(\"reserved: %d, disposalMethod: %d, userInput: %d, transparencyGiven: %d\",c.reserved,c.disposalMethod,c.userInput,c.transparencyGiven);c.delayTime=b.readUnsigned();\nf(\"delayTime: %d\",c.delayTime);c.transparencyIndex=b.readByte();f(\"transparencyIndex: %d\",c.transparencyIndex);c.terminator=b.readByte();f(\"terminator: %d\",c.terminator);g.ext.gce(c)}function j(c){c.comment=\"\";do{var i=b.readByte();c.comment+=b.read(i)}while(i!=0);g.ext.com(c)}function d(c){function i(k){f(\"NETSCAPE\");b.readByte();k.unknown=b.readByte();k.iterations=b.readUnsigned();k.terminator=b.readByte();f(\"iterations: %d, terminator: %d\",k.iterations,k.terminator);g.ext.app.NETSCAPE(k)}b.readByte();\nc.identifier=b.read(8);c.authCode=b.read(3);f(\"identifier: %s, authCode: %s\",c.identifier,c.authCode);switch(c.identifier){case \"NETSCAPE\":i(c);break;default:throw Error(\"Unknown Application Extension: \"+c.identifier);}}var f=e(\"  \");a.label=b.readByte();switch(a.label){case 249:f(\"Graphics Control Extension\");a.extType=\"gce\";h(a);break;case 254:f(\"Comment Extension\");a.extType=\"com\";j(a);break;case 255:f(\"Application Extension\");d(a);break;case 1:throw Error(\"Plain Text extension (0x01) unsupported\");\ndefault:throw Error(\"Unknown extension: 0x\"+label.toString(16));}}function n(){var a={};a.sentinel=b.readByte();switch(String.fromCharCode(a.sentinel)){case \"!\":a.type=\"ext\";m(a);break;case \",\":var h=e(\"  \");a.leftPos=b.readUnsigned();a.topPos=b.readUnsigned();a.width=b.readUnsigned();a.height=b.readUnsigned();h(\"left: %d, top: %d, width: %d, height: %d\",a.leftPos,a.topPos,a.width,a.height);var j=byteToBitArr(b.readByte());a.lctFlag=j.shift();a.interlace=j.shift();a.sorted=j.shift();a.reserved=j.shiftN(2);\na.lctSize=j.shiftN(3);h(\"lct? %d, interlace? %d, sorted? %d, reserved: %d, lctSize: %d\",a.lctFlag,a.interlace,a.sorted,a.reserved,a.lctSize);if(a.lctFlag){a.lct=l(1<<a.lctSize+1);h(\"lct read; %d entries\",a.lct.length)}a.lzwMinCodeSize=b.readByte();h=\"\";do{j=b.readByte();h+=b.read(j)}while(j);a.pixels=lzwDecode(a.lzwMinCodeSize,h);g.img(a);break;case \";\":a.type=\"eof\";g.eof(a);break;default:throw Error(\"Unknown block: 0x\"+a.sentinel.toString(16));}g.progress(b.pos,b.data.length);a.type!=\"eof\"&&setTimeout(n,\n0)}(function(){var a={};a.sig=b.read(3);a.ver=b.read(3);if(a.sig!=\"GIF\")throw Error(\"Not a GIF file.\");a.width=b.readUnsigned();a.height=b.readUnsigned();var h=byteToBitArr(b.readByte());a.gctFlag=h.shift();a.colorRes=bitsToNum(h.shiftN(3));a.sorted=h.shift();a.gctSize=bitsToNum(h.shiftN(3));a.bgColor=b.readByte();a.pixelAspectRatio=b.readByte();if(a.gctFlag)a.gct=l(1<<a.gctSize+1);g.hdr(a)})();n()}if(typeof exports!=\"undefined\"){exports.Stream=Stream;exports.parseGIF=parseGIF};function binGetURL(b,g){var e=new XMLHttpRequest;e.overrideMimeType(\"text/plain; charset=x-user-defined\");e.onload=function(){g(e.responseText)};e.open(\"GET\",b,true);e.send()}\nfunction done(b){function g(){h.push([n,a.getImageData(0,0,e.width,e.height)])}b=new Stream(b);var e,l=document.createElement(\"canvas\"),m=null,n=null,a=null,h=[],j=function(){var d=-1;return function(){d=(d+1)%h.length;var f=document.getElementById(\"c\");f.width=e.width;f.height=e.height;f.getContext(\"2d\").putImageData(h[d][1],0,0);setTimeout(j,h[d][0]*10)}}();parseGIF(b,{hdr:function(d){e=d;l.width=e.width;l.height=e.height},ext:{gce:function(d){a&&g();n=m=null;a=l.getContext(\"2d\");if(d.transparencyGiven)m=\nd.transparencyIndex;n=d.delayTime},app:{NETSCAPE:function(){}}},img:function(d){var f=d.lctFlag?d.lct:e.gct,c=a.createImageData(d.width,d.height);d.pixels.forEach(function(i,k){if(m==null||m!=i){c.data[k*4+0]=f[i][0];c.data[k*4+1]=f[i][1];c.data[k*4+2]=f[i][2];c.data[k*4+3]=255}});a.putImageData(c,d.leftPos,d.topPos)},eof:function(){g();j()},progress:function(d,f){document.getElementById(\"p\").innerHTML=Math.floor(d/f*100)+\"%\"}})}\nfunction run(){var b=document.getElementById(\"url\").value;binGetURL(b,done)};\n"]}